{"version":3,"file":"coursetranslator-ui.min.js","sources":["../src/coursetranslator-ui.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @module     local_coursetranslator/coursetranslator\n * @copyright  2022 Kaleb Heitzman <kaleb@jamfire.io>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Translation Editor UI\n * @param {Object} config JS Config\n */\nexport const init = (config) => {\n\n  /**\n   * Switch Translation Language\n   */\n  let localeSwitcher = document.querySelector(\n    \".local-coursetranslator__localeswitcher\"\n  );\n  localeSwitcher.addEventListener(\"change\", (e) => {\n    let url = new URL(window.location.href);\n    let searchParams = url.searchParams;\n    searchParams.set(\"course_lang\", e.target.value);\n    let newUrl = url.toString();\n\n    window.location = newUrl;\n  });\n\n  /**\n   * Show Updated Checkbox\n   */\n  let showUpdatedCheckbox = document.querySelector(\n    \".local-coursetranslator__show-updated\"\n  );\n  showUpdatedCheckbox.addEventListener(\"change\", (e) => {\n    let items = document.querySelectorAll('[data-status=\"updated\"]');\n    if (e.target.checked) {\n      items.forEach((item) => {\n        item.classList.remove(\"d-none\");\n      });\n    } else {\n      items.forEach((item) => {\n        item.classList.add(\"d-none\");\n      });\n    }\n  });\n\n  /**\n   * Show Update Needed Checkbox\n   */\n  let showUpdateNeededCheckbox = document.querySelector(\n    \".local-coursetranslator__show-needsupdate\"\n  );\n  showUpdateNeededCheckbox.addEventListener(\"change\", (e) => {\n    let items = document.querySelectorAll('[data-status=\"needsupdate\"]');\n    if (e.target.checked) {\n      items.forEach((item) => {\n        item.classList.remove(\"d-none\");\n      });\n    } else {\n      items.forEach((item) => {\n        item.classList.add(\"d-none\");\n      });\n    }\n  });\n\n  /**\n   * Select All Checkbox\n   */\n  const selectAll = document.querySelector(\n    \".local-coursetranslator__select-all\"\n  );\n  if (config.autotranslate) {\n    selectAll.disabled = false;\n  }\n  selectAll.addEventListener(\"click\", (e) => {\n    // See if select all is checked\n    let checked = e.target.checked;\n    let checkboxes = document.querySelectorAll(\n      \".local-coursetranslator__checkbox\"\n    );\n\n    // Check/uncheck checkboxes\n    if (checked) {\n      checkboxes.forEach((e) => {\n        e.checked = true;\n      });\n    } else {\n      checkboxes.forEach((e) => {\n        e.checked = false;\n      });\n    }\n    toggleAutotranslateButton();\n  });\n\n  /**\n   * Autotranslate Checkboxes\n   */\n  const checkboxes = document.querySelectorAll(\n    \".local-coursetranslator__checkbox\"\n  );\n  if (config.autotranslate) {\n    checkboxes.forEach((e) => {\n      e.disabled = false;\n    });\n  }\n  checkboxes.forEach((e) => {\n    e.addEventListener(\"change\", () => {\n      toggleAutotranslateButton();\n    });\n  });\n\n  /**\n   * Autotranslate Button Display\n   * @returns void\n   */\n  const autotranslateButton = document.querySelector(\n    \".local-coursetranslator__autotranslate-btn\"\n  );\n\n  /**\n   * Toggle Autotranslate Button\n   */\n  const toggleAutotranslateButton = () => {\n    let checkboxItems = [];\n    checkboxes.forEach((e) => {\n      checkboxItems.push(e.checked);\n    });\n    let checked = checkboxItems.find((checked) => checked === true)\n      ? true\n      : false;\n    if (config.autotranslate && checked) {\n      autotranslateButton.disabled = false;\n    } else {\n      autotranslateButton.disabled = true;\n    }\n  };\n\n};"],"names":["config","document","querySelector","addEventListener","e","url","URL","window","location","href","searchParams","set","target","value","newUrl","toString","items","querySelectorAll","checked","forEach","item","classList","remove","add","selectAll","autotranslate","disabled","checkboxes","toggleAutotranslateButton","autotranslateButton","checkboxItems","push","find"],"mappings":"+KAyBoB,SAACA,QAKEC,SAASC,cAC5B,2CAEaC,iBAAiB,UAAU,SAACC,OACrCC,IAAM,IAAIC,IAAIC,OAAOC,SAASC,MACfJ,IAAIK,aACVC,IAAI,cAAeP,EAAEQ,OAAOC,WACrCC,OAAST,IAAIU,WAEjBR,OAAOC,SAAWM,UAMMb,SAASC,cACjC,yCAEkBC,iBAAiB,UAAU,SAACC,OAC1CY,MAAQf,SAASgB,iBAAiB,2BAClCb,EAAEQ,OAAOM,QACXF,MAAMG,SAAQ,SAACC,MACbA,KAAKC,UAAUC,OAAO,aAGxBN,MAAMG,SAAQ,SAACC,MACbA,KAAKC,UAAUE,IAAI,gBAQMtB,SAASC,cACtC,6CAEuBC,iBAAiB,UAAU,SAACC,OAC/CY,MAAQf,SAASgB,iBAAiB,+BAClCb,EAAEQ,OAAOM,QACXF,MAAMG,SAAQ,SAACC,MACbA,KAAKC,UAAUC,OAAO,aAGxBN,MAAMG,SAAQ,SAACC,MACbA,KAAKC,UAAUE,IAAI,oBAQnBC,UAAYvB,SAASC,cACzB,uCAEEF,OAAOyB,gBACTD,UAAUE,UAAW,GAEvBF,UAAUrB,iBAAiB,SAAS,SAACC,OAE/Bc,QAAUd,EAAEQ,OAAOM,QACnBS,WAAa1B,SAASgB,iBACxB,qCAIEC,QACFS,WAAWR,SAAQ,SAACf,GAClBA,EAAEc,SAAU,KAGdS,WAAWR,SAAQ,SAACf,GAClBA,EAAEc,SAAU,KAGhBU,mCAMID,WAAa1B,SAASgB,iBAC1B,qCAEEjB,OAAOyB,eACTE,WAAWR,SAAQ,SAACf,GAClBA,EAAEsB,UAAW,KAGjBC,WAAWR,SAAQ,SAACf,GAClBA,EAAED,iBAAiB,UAAU,WAC3ByB,sCAQEC,oBAAsB5B,SAASC,cACnC,8CAMI0B,0BAA4B,eAC5BE,cAAgB,GACpBH,WAAWR,SAAQ,SAACf,GAClB0B,cAAcC,KAAK3B,EAAEc,gBAEnBA,UAAUY,cAAcE,MAAK,SAACd,gBAAwB,IAAZA,WAG1ClB,OAAOyB,eAAiBP,QAC1BW,oBAAoBH,UAAW,EAE/BG,oBAAoBH,UAAW"}